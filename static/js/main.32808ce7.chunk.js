(this.webpackJsonpappblog=this.webpackJsonpappblog||[]).push([[0],{100:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=(a(97),a(98),a(99),a(5)),s=(a(100),a(153)),m=a(154),i=a(155),u=a(7),p=a(9),d=a(8),g="https://blog-1o1.herokuapp.com/",f=function(){var e="Bearer "+localStorage.getItem("token").slice(1,-1);return parseInt(localStorage.getItem("expiry"))<Date.now()-5e3?null:e},h=function(e){return{type:"LOGIN_FAILED",errmsg:e}},E=function(){return function(e){e({type:"LOGOUT_REQUEST"}),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("profile"),localStorage.removeItem("expiry"),e({type:"LOGOUT_SUCCESS"}),d.b.success("logged out!!")}},b=function(e){return{type:"ADD_PROFILES",profiles:e}},v=function(e){return{type:"ADD_POSTS",posts:e}},N=function(e){return{type:"REMOVE_POST",post:e}},O=function(e){return e&&e.length},y=function(e){return function(t){return!t||t.length<=e}},j=Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t=e.history,a=e.match,n=e.postForm,c=e.dispatch,o=localStorage.getItem("profile");null===o&&t.push("/createprofile"),o=JSON.parse(o);var l,p=function(e){var n=new FormData;n.append("title",e.title),n.append("content",e.content),n.append("image",e.image[0],e.title);var r=a.params.id;r?(n.append("_id",r),c(function(e,t){return function(a){var n=f();if(null!=n){var r=g+"post/"+e.get("_id");return fetch(r,{method:"PUT",headers:{Authorization:n},body:e}).then((function(e){return e.json()})).then((function(e){e.success?(console.log(e),d.b.success(e.message),a(N(e.post)),a(v([e.post])),t.replace("/")):d.b.error(e.message)})).catch((function(e){return d.b.error(e.message)}))}a(E())}}(n,t))):c(function(e,t){return function(a){var n=f();if(null!=n){return fetch("https://blog-1o1.herokuapp.com/post",{method:"POST",headers:{Authorization:n},body:e}).then((function(e){return e.json()})).then((function(e){e.success?(console.log(e),d.b.success(e.message),a(v([e.post])),t.replace("/")):d.b.error(e.message)})).catch((function(e){return d.b.error(e.message)}))}a(E())}}(n,t))};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h1",{className:"center"},"Create Post"),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-9 col-md-7 m-auto"},r.a.createElement(u.Form,{model:"postForm",onSubmit:function(e){return p(e)}},r.a.createElement(s.a,{className:"form-group my-3"},r.a.createElement(m.a,{htmlFor:"title",tag:"h4"},"Title"),r.a.createElement(u.Control.text,{model:".title",id:"title",name:"title",className:"form-control",placeholder:"title",validators:{required:O,minlength:(l=3,function(e){return e&&e.length>=l}),maxlength:y(15)}}),r.a.createElement(u.Errors,{className:"text-danger",model:".title",show:"touched",messages:{required:"Required! ",minlength:"Length must be atleast 3! ",maxlength:"Length must be atmost 15! "}})),r.a.createElement(s.a,{className:"form-group my-3"},r.a.createElement(m.a,{htmlFor:"content",tag:"h4"},"Content"),r.a.createElement(u.Control.textarea,{rows:"6",model:".content",id:"content",name:"content",className:"form-control"})),r.a.createElement(s.a,{className:"form-group my-3"},r.a.createElement(m.a,{htmlFor:"image"},"Pick an image"),r.a.createElement(u.Control.file,{model:".image",id:"image",name:"image",className:"form-control-file",onChange:function(e){return t=URL.createObjectURL(e.target.files[0]),c(u.actions.change("postForm.imageUrl",t));var t},validators:{required:O}}),r.a.createElement(u.Errors,{className:"text-danger",model:".image",show:"touched",messages:{required:"Required! "}})),r.a.createElement(s.a,null,r.a.createElement("img",{src:n.imageUrl,style:{height:150,width:"auto"},alt:"No File Selected"})),r.a.createElement(s.a,null,r.a.createElement(i.a,{type:"submit",color:"primary"},"Submit"))))))})),S=a(156),w=a(157),L=a(158),F=a(159),_=a(160),x=a(13),I=Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t=e.auth,a=e.post.posts.filter((function(e){return e.creator===t.user._id})),n=0!==a.length?a.map((function(e){return r.a.createElement("div",{className:"col-10 col-md-4 m-auto",key:e._id},r.a.createElement(S.a,{className:"box-shadow",style:{padding:0,borderRadius:15}},r.a.createElement(w.a,{src:e.imageUrl,style:{height:225,borderTopRightRadius:15,borderTopLeftRadius:15}}),r.a.createElement(L.a,{className:"p-5",style:{height:180}},r.a.createElement(F.a,{tag:"h5"},e.title),r.a.createElement(_.a,null,e.content.substr(0,35)+" ... ",r.a.createElement(x.b,{to:"/post/"+e._id},"Read more")))))})):r.a.createElement(r.a.Fragment,null);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h3",{className:"my-3 text-capitalize"},"My Posts")),r.a.createElement("div",{className:"row"},n))})),k=a(36),R=a.n(k),U=a(55),T=a(11),C=Object(T.g)(Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t,a=e.history,n=e.match,c=e.auth,o=e.profile,l=e.post,s=e.dispatch,m=function(){var e=Object(U.a)(R.a.mark((function e(t){var n,r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.imageUrl);case 2:return n=e.sent,e.next=5,n.blob();case 5:r=e.sent,c=new File([r],t.imageUrl,{type:r.type}),s(u.actions.change("profileForm.username",t.username)),s(u.actions.change("profileForm.bio",t.bio)),s(u.actions.change("profileForm.image[0]",c)),s(u.actions.change("profileForm.imageUrl",URL.createObjectURL(c))),a.push("/createprofile");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=n.params.id;p?t=o.profiles.filter((function(e){return e._id===p}))[0]:localStorage.getItem("profile")?(t=JSON.parse(localStorage.getItem("profile")),console.log(t)):a.push("/createprofile");var d=l.posts.filter((function(e){return e.creator===t.creator})),g=0!==d.length?d.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6",key:e._id},r.a.createElement(S.a,{className:"box-shadow",style:{padding:0,borderRadius:15}},r.a.createElement(w.a,{src:e.imageUrl,style:{height:225,borderTopRightRadius:15,borderTopLeftRadius:15}}),r.a.createElement(L.a,{className:"p-5",style:{height:180}},r.a.createElement(F.a,{tag:"h5"},e.title),r.a.createElement(_.a,null,e.content.substr(0,35)+" ... ",r.a.createElement(x.b,{to:"/post/"+e._id},"Read more")))))})):r.a.createElement(r.a.Fragment,null);return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-11 col-md-6 m-auto mb-5"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-4 col-md-3"},r.a.createElement("img",{className:"img-fluid rounded-circle",src:t.imageUrl,alt:"profile-pic"})),r.a.createElement("div",{className:"col-6 col-md-5"},r.a.createElement("h3",{className:"mr-3"},t.username),r.a.createElement("p",null,t.bio)),r.a.createElement("div",{className:"col-4 offset-7 offset-md-0"},c.user&&t.creator===c.user._id&&r.a.createElement(i.a,{outline:!0,color:"primary",onClick:function(){return m(t)}},"Edit"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 col-md-7 m-auto mt-5"},r.a.createElement("h3",null,t.username+"'s posts"),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},g)))))}))),P=a(161),A=Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t=e.post,a=e.profile;Object(n.useEffect)((function(){console.log(t),console.log(a)}),[t,a]);var c=t.posts?t.posts.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6",key:e._id},r.a.createElement(S.a,{className:"box-shadow",style:{padding:0,borderRadius:15}},r.a.createElement(w.a,{src:e.imageUrl,style:{height:225,borderTopRightRadius:15,borderTopLeftRadius:15}}),r.a.createElement(L.a,{className:"p-5",style:{height:180}},r.a.createElement(F.a,{tag:"h5"},e.title),r.a.createElement(_.a,null,e.content.substr(0,35)+" ... ",r.a.createElement(x.b,{to:"/post/"+e._id},"Read more")))))})):r.a.createElement(r.a.Fragment,null),o=a.profiles?a.profiles.map((function(e){return r.a.createElement("div",{className:"col-12",key:e._id},r.a.createElement(S.a,{className:"box-shadow"},r.a.createElement(P.a,{className:"d-flex"},r.a.createElement(P.a,{className:"mr-3 pt-2"},r.a.createElement(P.a,{object:!0,src:e.imageUrl,className:"img-fluid rounded-circle",style:{width:50,height:50}})),r.a.createElement(P.a,{body:!0},r.a.createElement(P.a,{heading:!0},e.username),e.bio.substr(0,35)+" ... ",r.a.createElement(x.b,{to:"/profile/"+e._id},"Read more")))))})):r.a.createElement(r.a.Fragment,null);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row my-5 align-items-center"},r.a.createElement("div",{className:"col-4 col-md-2 offset-1"},r.a.createElement("h2",null,"Tell Your Story to the World"),r.a.createElement("h5",null,"Join with us. Login and Register. Tell your story to world")),r.a.createElement("div",{className:"col-5 col-md-7 offset-2"},r.a.createElement("img",{className:"img img-fluid",src:"images/undraw_blog.png",alt:"blog_image"})),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-11 col-md-8 m-auto"},r.a.createElement("div",{className:"row"},c)),r.a.createElement("div",{className:"col-11 col-md-4 m-auto"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",null,"Popular Writers"),r.a.createElement("hr",null)),o))))})),D=a(22),G=a(172),q=a(173),J=a(174),z=a(175),M=a(164),B=a(165),Q=a(176),V=a(162),H=a(163),W=a(166),Y=a(167),K=a(168),X=a(169),Z=a(170),$=a(171),ee=Object(p.connect)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,a=e.dispatch,c=Object(n.useState)(""),o=Object(D.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),p=Object(D.a)(u,2),g=p[0],f=p[1],b=Object(n.useState)(!1),v=Object(D.a)(b,2),N=v[0],O=v[1],y=Object(n.useState)("1"),j=Object(D.a)(y,2),S=j[0],w=j[1],L=function(){O(!N)},F=function(e){S!==e&&w(e)},_=function(e){s(e.target.value)},x=function(e){f(e.target.value)},I=t.isLoading?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw text-primary"}):r.a.createElement("span",null);return r.a.createElement(r.a.Fragment,null,t.isAuthenticated?r.a.createElement(i.a,{className:"bg-primary ml-3",onClick:function(e){e.preventDefault(),a(E())}},"Logout",I):r.a.createElement(i.a,{className:"bg-primary ml-3",onClick:L},"Login",I),r.a.createElement(Q.a,{isOpen:N,toggle:L},r.a.createElement(V.a,{toggle:L},"Login/SignUp"),r.a.createElement(H.a,null,r.a.createElement(M.a,{tabs:!0},r.a.createElement(B.a,null,r.a.createElement(W.a,{className:"1"===S?"active":"",onClick:function(){F("1")}},"Login")),r.a.createElement(B.a,null,r.a.createElement(W.a,{className:"2"===S?"active":"",onClick:function(){F("2")}},"SignUp"))),r.a.createElement(Y.a,{activeTab:S},r.a.createElement(K.a,{tabId:"1"},r.a.createElement(X.a,{onSubmit:function(e){var t;e.preventDefault(),L(),a((t={email:g,password:l},function(e){return e({type:"LOGIN_REQUEST"}),fetch("https://blog-1o1.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){if(t.success){var a=t.token,n=t.user,r=t.profile,c=t.expiresIn;localStorage.setItem("expiry",(Date.now()+1e3*c).toString()),localStorage.setItem("token",JSON.stringify(a)),localStorage.setItem("user",JSON.stringify(n)),e(function(e,t){return{type:"LOGIN_SUCCESS",token:e,user:t}}(a,n)),d.b.success("login success!!"),r&&localStorage.setItem("profile",JSON.stringify(r))}else e(h(t.message)),d.b.error(t.message)})).catch((function(t){return e(h(t.message))}))}))}},r.a.createElement(Z.a,{className:"mb-2"},r.a.createElement(m.a,{htmlFor:"email"},"Email"),r.a.createElement($.a,{type:"email",name:"email",onChange:x,required:!0})),r.a.createElement(Z.a,{className:"mb-2"},r.a.createElement(m.a,{htmlFor:"password"},"Password"),r.a.createElement($.a,{type:"password",name:"password",onChange:_,required:!0})),r.a.createElement(i.a,{type:"submit",color:"primary"},"Login"))),r.a.createElement(K.a,{tabId:"2"},r.a.createElement(X.a,{onSubmit:function(e){e.preventDefault(),L();return fetch("https://blog-1o1.herokuapp.com/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,password:l})}).then((function(e){return e.json()})).then((function(e){e.success?d.b.success(e.message):d.b.error(e.message)})).catch((function(e){return d.b.error(e.message)}))}},r.a.createElement(Z.a,{className:"mb-2"},r.a.createElement(m.a,{htmlFor:"email"},"Email"),r.a.createElement($.a,{type:"email",name:"email",onChange:x,required:!0})),r.a.createElement(Z.a,{className:"mb-2"},r.a.createElement(m.a,{htmlFor:"password"},"Password"),r.a.createElement($.a,{type:"password",name:"password",onChange:_,required:!0})),r.a.createElement(i.a,{type:"submit",color:"primary"},"Register")))))))})),te=Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t=e.auth,a=Object(n.useState)(!1),c=Object(D.a)(a,2),o=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{dark:!0,expand:"md"},r.a.createElement("div",{className:"container"},r.a.createElement(q.a,{onClick:function(){l(!o)}}),r.a.createElement(J.a,{href:"/"},r.a.createElement("h1",null,"KHAN'S BLOG")),r.a.createElement(z.a,{isOpen:o,navbar:!0},r.a.createElement(M.a,{navbar:!0,className:"ml-auto"},t.isAuthenticated?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{active:!0},r.a.createElement(x.c,{exact:!0,activeClassName:"menu_active",className:"nav-link",to:"/"},"Home")),r.a.createElement(B.a,null,r.a.createElement(x.c,{exact:!0,activeClassName:"menu_active",className:"nav-link",to:"/profile"},"Profile")),r.a.createElement(B.a,null,r.a.createElement(x.c,{exact:!0,activeClassName:"menu_active",className:"nav-link",to:"/mypost"},"My Post")),r.a.createElement(B.a,null,r.a.createElement(x.c,{exact:!0,activeClassName:"menu_active",className:"nav-link",to:"/createpost"},"Create Post"))):r.a.createElement(B.a,{active:!0},r.a.createElement(x.c,{exact:!0,activeClassName:"menu_active",className:"nav-link",to:"/"},"Home")))),r.a.createElement(M.a,{navbar:!0},r.a.createElement(B.a,null,r.a.createElement(ee,null))))))}));var ae=function(e){var t=e.match,a=Object(n.useState)(""),c=Object(D.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),m=Object(D.a)(s,2),i=m[0],u=m[1],p=g+"confirmEmail/"+t.params.token;return fetch(p).then((function(e){return e.json()})).then((function(e){e.success?l(e.status):(u(!0),l(e.message))})).catch((function(e){u(!0),l(e.message)})),r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",top:0,height:"100vh",width:"100vw",background:"url('/images/email.png') center center fixed"}}),r.a.createElement("div",{style:{position:"absolute",top:"15vh",left:"50vw",transform:"translateX(-50%)"}},r.a.createElement("h2",null,i?"Something went wrong":"Thank you for being part of our blog"),r.a.createElement("h4",{style:{textAlign:"center",textTransform:"capitalize"}},o),i&&r.a.createElement("p",null,"You can send another link by going to register page"),r.a.createElement("h5",{style:{textAlign:"center"}},r.a.createElement(x.b,{to:"/",className:"btn btn-primary"},"Go to homepage"))))},ne=(a(149),function(e){return e&&e.length}),re=function(e){return function(t){return!t||t.length<=e}},ce=Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t=e.history,a=e.profileForm,n=e.dispatch,c=localStorage.getItem("profile");""===a.username&&c&&t.replace("/profile"),c=JSON.parse(c);var o,l=function(e){var a=new FormData;a.append("username",e.username),a.append("bio",e.bio),a.append("image",e.image[0],e.username),c?(a.append("_id",c._id),n(function(e,t){return function(a){var n=f();if(null!=n){var r=g+"profile/"+e.get("_id");return fetch(r,{method:"PUT",headers:{Authorization:n},body:e}).then((function(e){return e.json()})).then((function(e){e.success?(console.log(e),localStorage.setItem("profile",JSON.stringify(e.profile)),a({type:"REMOVE_PROFILE",profile:e.profile}),a(b([e.profile])),d.b.success(e.message),t.replace("/profile")):d.b.error(e.message)})).catch((function(e){return d.b.error(e.message)}))}a(E())}}(a,t))):n(function(e,t){return function(a){var n=f();if(null!=n){return fetch("https://blog-1o1.herokuapp.com/profile",{method:"POST",headers:{Authorization:n},body:e}).then((function(e){return e.json()})).then((function(e){e.success?(console.log(e),localStorage.setItem("profile",JSON.stringify(e.profile)),a(b([e.profile])),d.b.success(e.message),t.replace("/profile")):d.b.error(e.message)})).catch((function(e){return d.b.error(e.message)}))}a(E())}}(a,t))};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h1",{className:"center"},"Create Profile"),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-9 col-md-7 m-auto"},r.a.createElement(u.Form,{model:"profileForm",onSubmit:function(e){return l(e)},className:"container"},r.a.createElement(s.a,{className:"form-group my-3"},r.a.createElement(m.a,{htmlFor:"username",tag:"h4"},"Username"),r.a.createElement(u.Control.text,{model:".username",id:"username",name:"username",className:"form-control",placeholder:"username",validators:{required:ne,minlength:(o=3,function(e){return e&&e.length>=o}),maxlength:re(15)}}),r.a.createElement(u.Errors,{className:"text-danger",model:".username",show:"touched",messages:{required:"Required! ",minlength:"Length must be atleast 3! ",maxlength:"Length must be atmost 15! "}})),r.a.createElement(s.a,{className:"form-group my-3"},r.a.createElement(m.a,{htmlFor:"bio",tag:"h4"},"Bio"),r.a.createElement(u.Control.textarea,{rows:"6",model:".bio",id:"bio",name:"bio",className:"form-control"})),r.a.createElement(s.a,{className:"form-group my-3"},r.a.createElement(m.a,{htmlFor:"image"},"Pick an image"),r.a.createElement(u.Control.file,{model:".image",id:"image",name:"image",onChange:function(e){return t=URL.createObjectURL(e.target.files[0]),n(u.actions.change("profileForm.imageUrl",t));var t},className:"form-control-file",validators:{required:ne}}),r.a.createElement(u.Errors,{className:"text-danger",model:".image",show:"touched",messages:{required:"Required! "}})),r.a.createElement(s.a,null,r.a.createElement("img",{src:a.imageUrl,style:{height:150,width:"auto"},alt:"No File Selected"})),r.a.createElement(s.a,null,r.a.createElement(i.a,{type:"submit",color:"primary"},"Submit"))))))})),oe=Object(T.g)(Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t=e.history,a=e.match,n=e.auth,c=e.post,o=e.profile,l=e.dispatch,p={year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric"},h=function(){var e=Object(U.a)(R.a.mark((function e(a){var n,r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.imageUrl);case 2:return n=e.sent,e.next=5,n.blob();case 5:r=e.sent,c=new File([r],a.imageUrl,{type:r.type}),l(u.actions.change("postForm.title",a.title)),l(u.actions.change("postForm.content",a.content)),l(u.actions.change("postForm.image[0]",c)),l(u.actions.change("postForm.imageUrl",URL.createObjectURL(c))),t.push("/createpost/"+a._id);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=a.params.id,O=[],y=c.posts.filter((function(e){return e._id===b}));return 0!==y.length&&(O=o.profiles.filter((function(e){return e.creator===y[0].creator}))),r.a.createElement(r.a.Fragment,null,0!==y.length&&0!==O.length&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 col-md-7 m-auto"},r.a.createElement("h3",{className:"my-3 text-capitalize"},y[0].title))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 col-md-7 m-auto"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-3 col-md-2"},r.a.createElement("img",{src:O[0].imageUrl,className:"img-fluid rounded-circle",alt:"profile-pic"})),r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,O[0].username),"Posted on:",new Intl.DateTimeFormat("en-us",p).format(new Date(Date.parse(y[0].createdAt))))),r.a.createElement("div",{className:"d-flex justify-content-end  mb-3"},n.user&&O[0].creator===n.user._id&&r.a.createElement(i.a,{outline:!0,color:"primary",onClick:function(){return h(y[0])}},"Edit Post")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-9 col-md-7 m-auto"},r.a.createElement("img",{className:"d-flex mb-5",src:y[0].imageUrl,alt:"post_image",style:{height:300}}),n.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{close:!0,onClick:function(){return l((e=y[0]._id,function(t){var a=f();if(null!=a)return fetch(g+"post/"+e+"/like",{method:"GET",headers:{Authorization:a}}).then((function(e){return e.json()})).then((function(e){e.success?(console.log(e),t(N(e.post)),t(v([e.post])),d.b.success(e.message)):d.b.error(e.message)})).catch((function(e){return d.b.error(e.message)}));t(E())}));var e}},y[0].likes.filter((function(e){return e.author===n.user._id})).length?r.a.createElement("span",{className:"fa fa-heart",style:{color:"red"}}):r.a.createElement("span",{className:"fa fa-heart-o",style:{color:"red"}})),r.a.createElement("p",null,y[0].content),r.a.createElement(u.LocalForm,{onSubmit:function(e){var t,a,n=new FormData;n.append("comment",e.comment),n.append("author",JSON.parse(localStorage.getItem("profile"))._id),l((t=n,a=y[0]._id,function(e){var n=f();if(null!=n)return fetch(g+"post/"+a+"/comment",{method:"POST",headers:{Authorization:n},body:t}).then((function(e){return e.json()})).then((function(t){t.success?(console.log(t),e(N(t.post)),e(v([t.post])),d.b.success(t.message)):d.b.error(t.message)})).catch((function(e){return d.b.error(e.message)}));e(E())}))},className:"mb-5"},r.a.createElement(s.a,{className:"form-group my-3"},r.a.createElement(m.a,{htmlFor:"comment",tag:"h5"},"Leave your comment here"),r.a.createElement(u.Control.textarea,{rows:"2",model:".comment",id:"comment",name:"comment",className:"form-control"})),r.a.createElement(i.a,{type:"submit",color:"primary"},"Submit"))):r.a.createElement("p",null,y[0].content),0!==y[0].comments.lenght&&y[0].comments.map((function(e){return r.a.createElement(S.a,{className:"box-shadow container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-7 mb-1"},r.a.createElement(F.a,{tag:"h5"},e.author.username),r.a.createElement(_.a,null,e.comment)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement(_.a,null,new Intl.DateTimeFormat("en-us",p).format(new Date(Date.parse(e.createdAt)))))))}))))))}))),le=Object(p.connect)((function(e){return Object(l.a)({},e)}))((function(e){var t=e.auth,a=e.dispatch;return Object(n.useEffect)((function(){a((function(e){e({type:"POST_LOADING"}),fetch("https://blog-1o1.herokuapp.com/post").then((function(e){return e.json()})).then((function(t){t.success?e(v(t.posts)):(console.log(t),e((t.message,{type:"POST_FAILED"})))})).catch((function(t){console.log(t),e({type:"POST_FAILED"})}))})),a((function(e){e({type:"PROFILE_LOADING"}),fetch("https://blog-1o1.herokuapp.com/profile").then((function(e){return e.json()})).then((function(t){t.success?e(b(t.profiles)):(console.log(t),e((t.message,{type:"PROFILE_FAILED"})))})).catch((function(t){console.log(t),e({type:"PROFILE_FAILED"})}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(te,null),r.a.createElement(T.d,null,r.a.createElement(T.b,{exact:!0,path:"/",component:A}),r.a.createElement(T.b,{exact:!0,path:"/confirm/:token",component:ae}),r.a.createElement(T.b,{exact:!0,path:"/profile/:id",component:C}),r.a.createElement(T.b,{exact:!0,path:"/post/:id",component:oe}),t.isAuthenticated?r.a.createElement(T.b,{exact:!0,path:"/profile",component:C}):r.a.createElement(T.a,{to:"/"}),t.isAuthenticated?r.a.createElement(T.b,{exact:!0,path:"/mypost",component:I}):r.a.createElement(T.a,{to:"/"}),t.isAuthenticated?r.a.createElement(T.b,{exact:!0,path:"/createpost",component:j}):r.a.createElement(T.a,{to:"/"}),t.isAuthenticated?r.a.createElement(T.b,{exact:!0,path:"/createpost/:id",component:j}):r.a.createElement(T.a,{to:"/"}),t.isAuthenticated?r.a.createElement(T.b,{exact:!0,path:"/createprofile",component:ce}):r.a.createElement(T.a,{to:"/"}),r.a.createElement(T.a,{to:"/"})),r.a.createElement(d.a,null))})),se=a(24),me={isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,errmsg:null},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,isAuthenticated:!1,token:null,user:null,errmsg:null});case"LOGIN_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAuthenticated:!0,token:t.token,user:t.user});case"LOGIN_FAILED":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errmsg:t.errmsg});case"LOGOUT_REQUEST":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case"LOGOUT_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAuthenticated:!1,user:null,token:null});default:return e}},ue=a(37),pe={isLoading:!1,errmsg:null,posts:[]},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POSTS":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errmsg:"",posts:[].concat(Object(ue.a)(e.posts),Object(ue.a)(t.posts))});case"POST_LOADING":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,errmsg:""});case"POST_FAILED":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errmsg:t.message});case"REMOVE_POST":return Object(l.a)(Object(l.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.post._id}))});default:return e}},ge={isLoading:!1,errmsg:null,profiles:[]},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PROFILES":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errmsg:"",profiles:[].concat(Object(ue.a)(e.profiles),Object(ue.a)(t.profiles))});case"PROFILE_LOADING":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,errmsg:""});case"PROFILE_FAILED":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errmsg:t.message});case"REMOVE_PROFILE":return Object(l.a)(Object(l.a)({},e),{},{profiles:e.profiles.filter((function(e){return e._id!==t.profile._id}))});default:return e}},he=a(90),Ee=a(91),be=a.n(Ee),ve={username:"",bio:"",imageUrl:"",image:[]},Ne={title:"",content:"",imageUrl:"",image:[]},Oe=Object(se.createStore)(Object(se.combineReducers)(Object(l.a)({auth:ie,post:de,profile:fe},Object(u.createForms)({postForm:Ne,profileForm:ve}))),Object(se.applyMiddleware)(he.a,be.a));o.a.render(r.a.createElement(p.Provider,{store:Oe},r.a.createElement(x.a,null,r.a.createElement(le,null))),document.getElementById("root"))},92:function(e,t,a){e.exports=a(150)},99:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.32808ce7.chunk.js.map